language: node_js
node_js: node
addons:
  chrome: stable
script:
- npm run lint
- |
  if [ $TRAVIS_PULL_REQUEST != false ] && [ $TRAVIS_SECURE_ENV_VARS == true ]; then
    echo "Pull request with secure environment variables, running Sauce tests...";
    npm run test:polymer:sauce || travis_terminate 1;
  else
    echo "Not a pull request and/or no secure environment variables, running headless tests...";
    npm run test:polymer:local || travis_terminate 1;
  fi
after_success:
- frauci-update-version -d=skip && export TRAVIS_TAG=$(frauci-get-version)
deploy:
  provider: releases
  api_key: "$GITHUB_RELEASE_TOKEN"
  on:
    tags: true
env:
  global:
  - OWNER_NAME=BrightspaceUI
  - REPO_NAME=file-uploader
  - SAUCE_USERNAME: Gaudi1
  # SAUCE_ACCESS_KEY
  - secure: VBHQtt6AEx1Ee73JUwzkFt0hxQPyof5NjbcqhTp9ZX4M32dy+Y3IZ+JAAycWpe8vunvYecmk3jiku9S5b6GKcYFCCM5GX04JwIxIYk1JcX0Ub561mdmJIS5TzXpGVt5G2eO3nD6kARgeLesvpfZxVSKkiJZWRboXpw13sKEe0OwGTie1jYjFa6SZLa1QIXdWvoBrvBGLvsER4mJkK0S+IEBfbcdUd+olwFxCx652THbtbWAfkWmTNib/CdV/9OuWK/pTI5z6JWIOXFocnEBXt2zv/mnzbqQDD99w2vKpx1efyG16rm8qhp+nuF3aVk7efEqvb8aMFD4g2rizN/S7xn+YrSkVSZYaKrvW6C0V83eWWO+UR5MWiS/bMUeL/h8ioUiKkyjoGWQosLjybZvCm6jEVUJUEnHlJzxQQqde/8/z+T7YO8ifjG7KRvVUXbYJ4MPokhE5fjfLrl3eqOn9v/IkQfRXYjNcWcGlQSL3Xk8I/zs6JrrEUVt6oHo8q7lC2Q9i/+vM7N4NhzZcQJgI9diiD2XDyiq5v7CB1nZ4WBMUhZsAlIKUKKL5IwerA5q5msOlEqATK6egAFkqu4/06bwVI4HJWvlNr7IlPSKJEdY+MVtf/oSMTZUzP3SRONTOKb1UaXosWjyNRf13t8FgoJ5BmozSyC3NbtB/voZITTc=
  # GITHUB_RELEASE_TOKEN
  - secure: JGGYU1tQS56VBOIF21rOgGApFiqYr9fI1L9hjW7kV6viLTQH4EeCT6fxRd3NgvGegM1+7dspKZkeOG9VVpXzoBjVdnkhjzhWcAs/V76K0kmgP7gFtMxy6xm6S8EpX1lecpjGE5mIBnssGDCj3Cu8tPoOyUL1beKe0rZfh9HTGoFHJTpGpOOg2mxrpc9c1y1i4P01Z45Bi3SZirC4ryVECimOGDK/wDjrMhi8Dbkdmn9Lj3rw65xt2Rw5lC1/kAJ5VtCNRW3HVlrPWKqqjyy1S9PrpESU1BFEkGgfMsLjKbxuk2XaTqFrOJUoxD8XqnhpvPUdgh6gLwIA/AeZJbxwDwB79M6CZHcpF6lZze9T3fw+wSITnHH0uKrelM50KDPwAPvUna5mU50Y1J7RvvdyIc7QFhnrVrKl3XDCyK4L2LsHaRo2+Ye5vSZGSac70l6O+WXNluIVmWRNB832MxVKtgXrRqARiFIsMieOkCAm3jCXaUnPD8K4vdumT+c9UH/c1O6yuL4chHPnZexAOF5tdDdnUnS1yLMLICTRs7+PHrtJYmOqxjAkwM4o+Lktq6eVxGi1OAvI5OH6HAhnnrZDz0GUiek4BC9j1yTsHxFUyKPrOQ0rcHFQmC57miNjAaacFfJlL+X6zb7det0u6L6nf1/K33vu07bWXx/hq1KVm7I=
