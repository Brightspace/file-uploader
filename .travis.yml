language: node_js
node_js: node
addons:
  chrome: stable
script:
- npm run lint
- |
  if [ $TRAVIS_PULL_REQUEST != false ] && [ $TRAVIS_SECURE_ENV_VARS == true ]; then
    echo "Pull request with secure environment variables, running Sauce tests...";
    npm run test:polymer:sauce || travis_terminate 1;
  else
    echo "Not a pull request and/or no secure environment variables, running headless tests...";
    npm run test:polymer:local || travis_terminate 1;
  fi
env:
  global:
  - SAUCE_USERNAME: Desire2Learn
  - secure: dSqGOEPNGxnA3o9eZubz8XaFM/JaxBm7U+FIIgSspSHAUxmdDS9oEuwv8cWQsTkP7+Gv50n//tAoWpD9mjbvs2gfwiDJG4ulA/JHms7+WBt0GP+/LunC1s2QJmQXAbO11amB/n+qU7CrvLgpXFyWPeD5wekEpOWXbLnh29txtjrjbJMiT+1q9j1leeu0pQF45voW+bBZyWUULB0Yd0FyOBgps2SPc1pUyYWDyCX5BjZ81qh0+p9R68pQpoXtz90IVfzsJrZYnB/FNSZx6vuJYeBB0VPJXIuJiMjTWof1MccUHasopikA1zS2RB0P5GY+PGuhUdRbocqv2iFLyg+0sdQkHjoHoD0GzUzlFA9royyOk+76l6AWF5BYlaT80cw7jcROIksD7W5uiXj4swpahEeiA7Tnin7KcyPTCWAMAUc7jis/ACGyycgUl1dQ6Kyhid35raZ1hdVQmKrVlWQfXGBGlMjXEuxgvTOVX6EHyNqLTfA1dd7gNeIOkYJZO/SDlahPHgzjC6K5FB5I5gbHZKoDZySFf0qBW1OL6nOR5FsHi5ZaqnPBWoo8ZopX5qlL+UqquJfUM3icIwwUT9R4KTCvDCmXfdoicFRjvikZDLvhSgBScgFdab/g4ZbLCtqo2o4pJ28t5Lb/7olOKCscxYF9RxNXpHc5K0hZjHq7pWU=
